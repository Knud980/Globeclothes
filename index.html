// App.jsx or index.jsx
import React, { useRef, useEffect } from "react";
import Globe from "react-globe.gl";

export default function GlobeView() {
  const globeRef = useRef();

  const markers = [
    {
      lat: 48.8566,
      lng: 2.3522,
      name: "Paris",
      link: "https://example.com/paris"
    },
    {
      lat: 40.7128,
      lng: -74.006,
      name: "New York",
      link: "https://example.com/ny"
    }
  ];

  useEffect(() => {
    if (globeRef.current) {
      globeRef.current.controls().autoRotate = true;
      globeRef.current.controls().autoRotateSpeed = 0.3;
    }
  }, []);

  return (
    <Globe
      ref={globeRef}
      globeImageUrl="//unpkg.com/three-globe/example/img/earth-dark.jpg"
      backgroundColor="rgba(0,0,0,0)"
      labelsData={markers}
      labelLat={(d) => d.lat}
      labelLng={(d) => d.lng}
      labelText={(d) => d.name}
      labelSize={1.5}
      labelColor={() => "white"}
      labelDotRadius={0.4}
      labelResolution={2}
      onLabelClick={(label) => window.open(label.link, "_blank")}
    />
  );
}
